<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cancer Incidence & Environmental Quality in U.S. Counties</title>

  <!-- D3 + TopoJSON -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script src="https://cdn.jsdelivr.net/npm/topojson@3"></script>

  <style>
    /* ========================
       Global Styles & Narrative
       ======================== */
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 1rem;
      background: #f9f9f9;
      line-height: 1.6;
      color: #333;
    }
    h1, h2, h3 {
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
      color: #222;
    }
    h1 {
      text-align: center;
      font-size: 2rem;
    }
    h2 {
      font-size: 1.5rem;
    }
    h3 {
      font-size: 1.25rem;
    }
    p {
      max-width: 800px;
      margin-bottom: 1rem;
    }
    section {
      max-width: 800px;
      margin: 0 auto 2rem auto;
      padding: 0 1rem;
    }

    /* ========================
       Dashboard Controls
       ======================== */
    #controls {
      text-align: center;
      margin-bottom: 1rem;
      position: relative; /* anchor for suggestion dropdown */
    }
    #search-container {
      display: inline-block;
      position: relative;
      margin-right: 8px;
    }
    #county-search {
      width: 200px;
      padding: 4px;
      font-size: 0.9rem;
    }
    button {
      padding: 4px 8px;
      font-size: 0.9rem;
      margin-right: 8px;
    }
    select {
      font-size: 1rem;
      padding: 0.25rem;
      margin: 0 8px;
    }

    /* Suggestions dropdown */
    #suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      background: #fff;
      border: 1px solid #ccc;
      max-height: 150px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
    }
    .suggestion-item {
      padding: 4px 8px;
      cursor: pointer;
    }
    .suggestion-item:hover {
      background-color: #eee;
    }

    /* ========================
       Map & Tooltip Styles
       ======================== */
    #map {
      width: 960px;
      margin: 0 auto 2rem auto;
      position: relative;
    }
    svg {
      display: block;
    }
    /* Tooltip must float above everything */
    .tooltip {
      position: absolute;
      z-index: 1000;
      padding: 6px 8px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      border-radius: 4px;
      pointer-events: none;
      font-size: 0.9rem;
      opacity: 0;
      transition: opacity 0.2s;
    }

    /* Space between cancer map and pollution map */
    #pollution-container {
      margin-top: 2rem;
    }
  </style>
</head>

<body>
  <h1>Cancer Incidence & Environmental Quality in U.S. Counties</h1>

  <!-- ================================================================
       1. Introduction
       ================================================================ -->
  <section id="introduction">
    <h2>Introduction</h2>
    <p>
      Cancer remains one of the most pressing public‐health challenges in the United States. Although genetics plays a role in many individual cases, environmental factors—especially air and industrial pollution—are widely believed to contribute to elevated cancer rates. Our project asks:
      <strong>Where in America do cancer rates run unusually high, and could environmental exposure explain some of those patterns?</strong>
    </p>
    <p>
      To answer that, we built an interactive, county‐level map of cancer incidence, then layered on different forms of pollution data (fine‐particulate air pollution and industrial facilities) to see how they overlap. In what follows, we guide you through our thought process—first highlighting the raw cancer data, then introducing air pollution, then industrial facilities. Finally, you’ll find a fully interactive dashboard where you can explore everything together.
    </p>
  </section>

  <!-- ================================================================
       2. Exploring the Cancer Landscape
       ================================================================ -->
  <section id="cancer-landscape">
    <h2>1. Exploring the Cancer Landscape</h2>
    <p>
      <strong>What do cancer rates look like across U.S. counties?</strong><br/>
      Below (in the interactive map section), you’ll see a choropleth of age‐adjusted cancer incidence (cases per 100,000 people) for every county. Darker reds indicate higher incidence rates; paler counties have lower rates.
    </p>
    <p>
      As you hover over each county, a tooltip will show its name and its cancer incidence. Notice immediately that cancer rates are not evenly distributed across the country:
      <ul>
        <li>Many rural counties in the Mountain West appear quite pale (lower incidence).</li>
        <li>Pockets of the Midwest and Northeast show clusters of deeper red (higher incidence).</li>
        <li>For instance, certain counties in Kentucky and West Virginia have incidence rates well above 650 per 100,000, while some counties in Utah and Nevada dip below 350 per 100,000.</li>
      </ul>
    </p>
    <p>
      We began our analysis simply by observing these spatial disparities:
      <ul>
        <li><strong>And</strong> we noticed that regions such as Appalachia stand out as hotbeds of high incidence.</li>
        <li><strong>But</strong> maps alone cannot tell us <em>why</em> a county’s cancer rate is so high or low.</li>
        <li><strong>Therefore</strong>, we asked: <em>Could environmental pollution be part of the story?</em></li>
      </ul>
    </p>
  </section>

  <!-- ================================================================
       3. Layering on Air Pollution
       ================================================================ -->
  <section id="air-pollution">
    <h2>2. Layering on Air Pollution</h2>
    <p>
      <strong>Is there a relationship between cancer rates and air quality?</strong><br/>
      Next, we incorporated U.S. EPA data on fine particulate matter (PM₂.₅) to create a second map. This “Air Pollution Score” represents each county’s average PM₂.₅ level (in µg/m³) over a five‐year period, standardized so that low values (around 3 µg/m³) appear light blue and high values (up to 15 µg/m³) appear dark navy. Hovering over a county now also shows its PM₂.₅ reading.
    </p>
    <p>
      At a glance, higher PM₂.₅ concentrations cluster around urban and industrial corridors—think Los Angeles, Houston, Chicago, the Northeast megalopolis, and parts of the Ohio River Valley. Meanwhile, many rural counties in the Great Plains and Mountain West show very low PM₂.₅.
    </p>
    <p>
      <strong>Comparing the two maps:</strong>
      <ul>
        <li><strong>And</strong> several high‐cancer counties do overlap regions of poor air quality (for example, parts of Kentucky, West Virginia, and Pennsylvania).</li>
        <li><strong>But</strong> there are exceptions: some counties with relatively clean air still exhibit high cancer rates (perhaps due to other local factors), and conversely, some counties with high PM₂.₅ do not show the very highest cancer rates (potentially reflecting good healthcare access or other social determinants).</li>
        <li><strong>Therefore</strong>, while the overlap is suggestive, <em>air pollution alone cannot explain every pattern</em>. We next asked whether other types of pollution might shed further light.
      </ul>
    </p>
  </section>

  <!-- ================================================================
       4. Introducing Industrial Pollution
       ================================================================ -->
  <section id="industrial-pollution">
    <h2>3. Introducing Industrial Pollution</h2>
    <p>
      <strong>Could the presence of large industrial facilities help explain elevated cancer clusters?</strong><br/>
      We compiled a dataset of major industrial sites (e.g., power plants, chemical manufacturers, refineries) that each handle or produce over 10,000 tons of pollutants annually. Each facility is represented by its latitude, longitude, and name. Rather than making a separate standalone map, we overlay “facility dots” directly on top of the cancer choropleth. Blue circles indicate the location of each facility; hovering on a dot shows the facility name.
    </p>
    <p>
      Immediately, you’ll see that many of these facilities sit in or near counties that reported higher cancer incidence:
      <ul>
        <li>In the Ohio River Valley, clusters of chemical plants and power stations coincide with dark red counties.</li>
        <li>In southwestern Pennsylvania and northern West Virginia, multiple industry dots appear intermingled with high‐cancer hues.</li>
        <li>Conversely, rural counties in the Mountain West with few or no large facilities remain pale on the cancer map.</li>
      </ul>
    </p>
    <p>
      <strong>Putting this side‐by‐side with our air pollution layer:</strong>
      <ul>
        <li><strong>And</strong> many industrial sites also correlate with elevated PM₂.₅ values, suggesting that emissions from these plants degrade local air quality.</li>
        <li><strong>But</strong> not every facility leads to extreme PM₂.₅ readings—some operate low‐emission processes or have advanced pollution controls.</li>
        <li><strong>Therefore</strong>, the facility overlay adds nuance: it highlights that local point sources (e.g., chemical manufacturers or heavy industry) likely contribute both to particulate matter and to other toxins not captured by PM₂.₅ alone.</li>
      </ul>
    </p>
  </section>

  <!-- ================================================================
       5. Interactive Exploration
       ================================================================ -->
  <section id="interactive">
    <h2>4. Interactive Exploration</h2>
    <p>
      <strong>Now that we’ve explored cancer incidence, air pollution, and industrial facilities one at a time, you have full interactive control below.</strong>
    </p>
    <p>
      <em>Use these controls to mix and match layers:</em>
      <ul>
        <li><strong>Search Box</strong>: Type a county name (e.g., “King County, Washington”) to zoom directly to that county. As you type, a dropdown suggests matching county names—click one to fill the box instantly.</li>
        <li><strong>Cancer‐Type Dropdown</strong>: Choose “All Cancer Sites,” “Leukemia,” “Lymphoma,” or “Thyroid” to recolor the cancer choropleth by the selected subtype.</li>
        <li><strong>Pollution‐Metric Dropdown</strong>:
          <ul>
            <li><strong>None</strong> (default): View only the cancer map.</li>
            <li><strong>Air Pollution (PM₂.₅)</strong>: Show the PM₂.₅ choropleth under the cancer layer; hover over a county to see its PM₂.₅ reading.</li>
            <li><strong>Industry Facilities</strong>: Overlay blue dots for each major facility on top of the cancer map; hover over a dot to see the facility name.</li>
          </ul>
        </li>
        <li><strong>Reset Button</strong>: Return both maps to their full‐national view and clear any overlays.</li>
      </ul>
    </p>
    <p>
      In essence, this dashboard lets you:
      <ul>
        <li>Zoom into a single county and switch between cancer subtypes.</li>
        <li>Turn on the PM₂.₅ layer while viewing leukemia incidence to see if that subtype correlates more strongly with air pollution.</li>
        <li>Overlay industrial facilities on top of lymphoma incidence to identify local hotspots.</li>
      </ul>
    </p>
    <p>
      We encourage you to explore the data—zoom, toggle, and compare. See if patterns emerge that might link environmental exposures to elevated cancer rates in particular regions. Happy investigating!
    </p>
  </section>

  <!-- ================================================================
       6. Controls & Maps
       ================================================================ -->
  <h2 style="text-align: center; margin-bottom: 0.5rem;">Cancer & Pollution Dashboard</h2>

  <div id="controls">
    <!-- SEARCH WRAPPER -->
    <div id="search-container">
      <input
        type="text"
        id="county-search"
        placeholder="Type county, e.g. Union County, Florida"
      />
      <div id="suggestions"></div>
    </div>
    <button id="search-button">Go</button>

    <!-- CANCER DROPDOWN -->
    <label for="cancer-select">Cancer Type:</label>
    <select id="cancer-select">
      <option value="all" selected>All Cancer Sites</option>
      <option value="leukemia">Leukemia Incidence</option>
      <option value="lymphoma">Lymphoma Incidence</option>
      <option value="thyroid">Thyroid Incidence</option>
    </select>

    <!-- POLLUTION DROPDOWN -->
    <label for="pollution-select">Pollution Metric:</label>
    <select id="pollution-select">
      <option value="none" selected>None</option>
      <option value="pm25">Air Pollution (PM₂.₅)</option>
      <option value="industry">Industry Facilities</option>
      <option value="income">Income</option>
    </select>

    <!-- RESET BUTTON -->
    <button id="reset-button">Reset</button>
  </div>

  <div id="map">
    <div id="cancer-container">
      <svg id="cancer-svg" width="960" height="600"></svg>
      <!-- tooltip moved out below -->
    </div>

    <div id="pollution-container" style="display: none;">
      <svg id="pollution-svg" width="960" height="600"></svg>
      <!-- tooltip moved out below -->
    </div>
  </div>

  <!-- Two tooltip divs now live here, top‐level under <body> -->
  <div id="cancer-tooltip" class="tooltip"></div>
  <div id="pollution-tooltip" class="tooltip"></div>

  <script src="main_map.js"></script>
</body>
</html>
